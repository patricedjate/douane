{
    "sourceFile": "src/Controller/AgentController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 49,
            "patches": [
                {
                    "date": 1674485029466,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1674485147750,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,12 +5,13 @@\n use Symfony\\Bundle\\FrameworkBundle\\Controller\\AbstractController;\r\n use Symfony\\Component\\HttpFoundation\\Response;\r\n use Symfony\\Component\\Routing\\Annotation\\Route;\r\n \r\n+#[Route('/agent')]\r\n class AgentController extends AbstractController\r\n {\r\n \r\n-    #[Route('/agent', name: 'chef.index')]\r\n+    #[Route('/', name: 'agent.index')]\r\n     public function chef(): Response\r\n     {\r\n         return $this->render('agent/test.html.twig');\r\n     }\r\n"
                },
                {
                    "date": 1674487518103,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,7 +12,7 @@\n \r\n     #[Route('/', name: 'agent.index')]\r\n     public function chef(): Response\r\n     {\r\n-        return $this->render('agent/test.html.twig');\r\n+        return $this->render('agent/index.html.twig');\r\n     }\r\n }\r\n"
                },
                {
                    "date": 1674488100047,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,18 +1,19 @@\n-<?php\r\n-\r\n-namespace App\\Controller;\r\n-\r\n-use Symfony\\Bundle\\FrameworkBundle\\Controller\\AbstractController;\r\n-use Symfony\\Component\\HttpFoundation\\Response;\r\n-use Symfony\\Component\\Routing\\Annotation\\Route;\r\n-\r\n-#[Route('/agent')]\r\n-class AgentController extends AbstractController\r\n-{\r\n-\r\n-    #[Route('/', name: 'agent.index')]\r\n-    public function chef(): Response\r\n-    {\r\n-        return $this->render('agent/index.html.twig');\r\n-    }\r\n-}\r\n+<?php\n+\n+namespace App\\Controller;\n+\n+use Symfony\\Bundle\\FrameworkBundle\\Controller\\AbstractController;\n+use Symfony\\Component\\HttpFoundation\\Response;\n+use Symfony\\Component\\Routing\\Annotation\\Route;\n+\n+#[Route('/agent')]\n+class AgentController extends AbstractController\n+{\n+    #[Route('/', name: 'agentIndex')]\n+    public function index(): Response\n+    {\n+        return $this->render('agent/index.html.twig', [\n+            'controller_name' => 'AgentController',\n+        ]);\n+    }\n+}\n"
                },
                {
                    "date": 1674488128727,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,7 @@\n {\n     #[Route('/', name: 'agentIndex')]\n     public function index(): Response\n     {\n-        return $this->render('agent/index.html.twig', [\n-            'controller_name' => 'AgentController',\n-        ]);\n+        return $this->render('agent/index.html.twig');\n     }\n }\n"
                },
                {
                    "date": 1675329137509,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n <?php\n \n namespace App\\Controller;\n \n+use App\\Repository\\FicheRepository;\n use Symfony\\Bundle\\FrameworkBundle\\Controller\\AbstractController;\n use Symfony\\Component\\HttpFoundation\\Response;\n use Symfony\\Component\\Routing\\Annotation\\Route;\n \n@@ -13,5 +14,20 @@\n     public function index(): Response\n     {\n         return $this->render('agent/index.html.twig');\n     }\n+    #[Route('/ListeFiche', name: 'agent_ListeFiche')]\n+    public function agent(FicheRepository $repository): Response\n+    {\n+        $fiches = $repository->findAllFicheByUser($this->getUser());\n+        return $this->render('agent/ListeFiche.html.twig',[\n+            'fiches'=>$fiches\n+        ]);\n+    }\n+    #[Route('/edit/{id}', name: 'app_fiche_show', methods: ['GET'])]\n+    public function show(Fiche $fiche): Response\n+    {\n+        return $this->render('chef/fiche/show.html.twig', [\n+            'fiche' => $fiche,\n+        ]);\n+    }\n }\n"
                },
                {
                    "date": 1675329170372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,13 @@\n <?php\n \n namespace App\\Controller;\n \n+use App\\Entity\\Fiche;\n use App\\Repository\\FicheRepository;\n-use Symfony\\Bundle\\FrameworkBundle\\Controller\\AbstractController;\n use Symfony\\Component\\HttpFoundation\\Response;\n use Symfony\\Component\\Routing\\Annotation\\Route;\n+use Symfony\\Bundle\\FrameworkBundle\\Controller\\AbstractController;\n \n #[Route('/agent')]\n class AgentController extends AbstractController\n {\n@@ -25,9 +26,9 @@\n     }\n     #[Route('/edit/{id}', name: 'app_fiche_show', methods: ['GET'])]\n     public function show(Fiche $fiche): Response\n     {\n-        return $this->render('chef/fiche/show.html.twig', [\n+        return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n }\n"
                },
                {
                    "date": 1675329210695,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n         return $this->render('agent/ListeFiche.html.twig',[\n             'fiches'=>$fiches\n         ]);\n     }\n-    #[Route('/edit/{id}', name: 'app_fiche_show', methods: ['GET'])]\n+    #[Route('/{id}', name: 'fiche_show', methods: ['GET'])]\n     public function show(Fiche $fiche): Response\n     {\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n"
                },
                {
                    "date": 1675330299667,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,5 +30,24 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n+    #[Route('/AddRapport', name: 'agent_AddRapport')]\n+    public function add(Request $request, EntityManagerInterface $manager, UserRepository $repository): Response\n+    {\n+       \n+        $fiche = new Fiche();\n+        $agent = $repository->findOneByNombreDossier();\n+        $form = $this->createForm(FicheType::class, $fiche);\n+        $form->handleRequest($request);\n+        if ($form->isSubmitted() && $form->isValid()) {\n+            $fiche = $form->getData();\n+            $fiche->setUser($agent);\n+            $manager->persist($fiche);\n+            $manager->flush();\n+            #return $this->redirectToRoute('site/succes.html.twig');\n+        }\n+        return $this->render('demande_empotage/index.html.twig', [\n+            'form' => $form,\n+        ]);\n+    }\n }\n"
                },
                {
                    "date": 1675330320823,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,14 @@\n \n namespace App\\Controller;\n \n use App\\Entity\\Fiche;\n+use App\\Entity\\RapportEmpotage;\n+use App\\Form\\FicheType;\n+use App\\Repository\\UserRepository;\n use App\\Repository\\FicheRepository;\n+use Doctrine\\ORM\\EntityManagerInterface;\n+use Symfony\\Component\\HttpFoundation\\Request;\n use Symfony\\Component\\HttpFoundation\\Response;\n use Symfony\\Component\\Routing\\Annotation\\Route;\n use Symfony\\Bundle\\FrameworkBundle\\Controller\\AbstractController;\n \n@@ -34,9 +39,9 @@\n     #[Route('/AddRapport', name: 'agent_AddRapport')]\n     public function add(Request $request, EntityManagerInterface $manager, UserRepository $repository): Response\n     {\n        \n-        $fiche = new Fiche();\n+        $fiche = new RapportEmpotage();\n         $agent = $repository->findOneByNombreDossier();\n         $form = $this->createForm(FicheType::class, $fiche);\n         $form->handleRequest($request);\n         if ($form->isSubmitted() && $form->isValid()) {\n"
                },
                {
                    "date": 1675330402530,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,14 +40,13 @@\n     public function add(Request $request, EntityManagerInterface $manager, UserRepository $repository): Response\n     {\n        \n         $fiche = new RapportEmpotage();\n-        $agent = $repository->findOneByNombreDossier();\n-        $form = $this->createForm(FicheType::class, $fiche);\n+        $form = $this->createForm(RapportEmpotageType::class, $fiche);\n         $form->handleRequest($request);\n         if ($form->isSubmitted() && $form->isValid()) {\n             $fiche = $form->getData();\n-            $fiche->setUser($agent);\n+            $fiche->setUser($this->getUser());\n             $manager->persist($fiche);\n             $manager->flush();\n             #return $this->redirectToRoute('site/succes.html.twig');\n         }\n"
                },
                {
                    "date": 1675330456326,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,10 +2,11 @@\n \n namespace App\\Controller;\n \n use App\\Entity\\Fiche;\n+use App\\Form\\FicheType;\n use App\\Entity\\RapportEmpotage;\n-use App\\Form\\FicheType;\n+use App\\Form\\RapportEmpotageType;\n use App\\Repository\\UserRepository;\n use App\\Repository\\FicheRepository;\n use Doctrine\\ORM\\EntityManagerInterface;\n use Symfony\\Component\\HttpFoundation\\Request;\n@@ -39,15 +40,15 @@\n     #[Route('/AddRapport', name: 'agent_AddRapport')]\n     public function add(Request $request, EntityManagerInterface $manager, UserRepository $repository): Response\n     {\n        \n-        $fiche = new RapportEmpotage();\n-        $form = $this->createForm(RapportEmpotageType::class, $fiche);\n+        $rapport = new RapportEmpotage();\n+        $form = $this->createForm(RapportEmpotageType::class, $rapport);\n         $form->handleRequest($request);\n         if ($form->isSubmitted() && $form->isValid()) {\n-            $fiche = $form->getData();\n-            $fiche->setUser($this->getUser());\n-            $manager->persist($fiche);\n+            $rapport = $form->getData();\n+            $rapport->setUser($this->getUser());\n+            $manager->persist($rapport);\n             $manager->flush();\n             #return $this->redirectToRoute('site/succes.html.twig');\n         }\n         return $this->render('demande_empotage/index.html.twig', [\n"
                },
                {
                    "date": 1675330513792,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,9 +50,9 @@\n             $manager->persist($rapport);\n             $manager->flush();\n             #return $this->redirectToRoute('site/succes.html.twig');\n         }\n-        return $this->render('demande_empotage/index.html.twig', [\n+        return $this->render('agent/rapport.html.twig', [\n             'form' => $form,\n         ]);\n     }\n }\n"
                },
                {
                    "date": 1675330768294,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,9 @@\n             'fiche' => $fiche,\n         ]);\n     }\n     #[Route('/AddRapport', name: 'agent_AddRapport')]\n-    public function add(Request $request, EntityManagerInterface $manager, UserRepository $repository): Response\n+    public function add(Request $request, EntityManagerInterface $manager): Response\n     {\n        \n         $rapport = new RapportEmpotage();\n         $form = $this->createForm(RapportEmpotageType::class, $rapport);\n"
                },
                {
                    "date": 1675330846958,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,23 +36,23 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n-    #[Route('/AddRapport', name: 'agent_AddRapport')]\n-    public function add(Request $request, EntityManagerInterface $manager): Response\n-    {\n+    ##[Route('/AddRapport', name: 'agent_AddRapport')]\n+    #public function add(Request $request, EntityManagerInterface $manager): Response\n+   # {\n        \n-        $rapport = new RapportEmpotage();\n-        $form = $this->createForm(RapportEmpotageType::class, $rapport);\n-        $form->handleRequest($request);\n-        if ($form->isSubmitted() && $form->isValid()) {\n-            $rapport = $form->getData();\n-            $rapport->setUser($this->getUser());\n-            $manager->persist($rapport);\n-            $manager->flush();\n+       # $rapport = new RapportEmpotage();\n+       # $form = $this->createForm(RapportEmpotageType::class, $rapport);\n+       # $form->handleRequest($request);\n+       # if ($form->isSubmitted() && $form->isValid()) {\n+       #     $rapport = $form->getData();\n+       #     $rapport->setUser($this->getUser());\n+       #     $manager->persist($rapport);\n+      #      $manager->flush();\n             #return $this->redirectToRoute('site/succes.html.twig');\n-        }\n-        return $this->render('agent/rapport.html.twig', [\n-            'form' => $form,\n-        ]);\n-    }\n+       # }\n+       # return $this->render('agent/rapport.html.twig', [\n+       #     'form' => $form,\n+       # ]);\n+   # }\n }\n"
                },
                {
                    "date": 1675331201535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,23 +36,23 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n-    ##[Route('/AddRapport', name: 'agent_AddRapport')]\n-    #public function add(Request $request, EntityManagerInterface $manager): Response\n-   # {\n+    #[Route('/AddRapport', name: 'agent_AddRapport')]\n+    public function add(Request $request, EntityManagerInterface $manager): Response\n+    {\n        \n-       # $rapport = new RapportEmpotage();\n-       # $form = $this->createForm(RapportEmpotageType::class, $rapport);\n-       # $form->handleRequest($request);\n-       # if ($form->isSubmitted() && $form->isValid()) {\n-       #     $rapport = $form->getData();\n-       #     $rapport->setUser($this->getUser());\n-       #     $manager->persist($rapport);\n-      #      $manager->flush();\n+        $rapport = new RapportEmpotage();\n+        $form = $this->createForm(RapportEmpotageType::class, $rapport);\n+        $form->handleRequest($request);\n+        if ($form->isSubmitted() && $form->isValid()) {\n+            $rapport = $form->getData();\n+            $rapport->setUser($this->getUser());\n+            $manager->persist($rapport);\n+            $manager->flush();\n             #return $this->redirectToRoute('site/succes.html.twig');\n-       # }\n-       # return $this->render('agent/rapport.html.twig', [\n-       #     'form' => $form,\n-       # ]);\n-   # }\n+        }\n+        return $this->render('agent/rapport.html.twig', [\n+            'form' => $form,\n+        ]);\n+    }\n }\n"
                },
                {
                    "date": 1675331342331,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,12 @@\n <?php\n \n namespace App\\Controller;\n \n-use App\\Entity\\Fiche;\n-use App\\Form\\FicheType;\n+\n+\n use App\\Entity\\RapportEmpotage;\n use App\\Form\\RapportEmpotageType;\n-use App\\Repository\\UserRepository;\n use App\\Repository\\FicheRepository;\n use Doctrine\\ORM\\EntityManagerInterface;\n use Symfony\\Component\\HttpFoundation\\Request;\n use Symfony\\Component\\HttpFoundation\\Response;\n"
                },
                {
                    "date": 1675331365866,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,10 @@\n <?php\n \n namespace App\\Controller;\n \n+use App\\Entity\\Fiche;\n \n-\n use App\\Entity\\RapportEmpotage;\n use App\\Form\\RapportEmpotageType;\n use App\\Repository\\FicheRepository;\n use Doctrine\\ORM\\EntityManagerInterface;\n"
                },
                {
                    "date": 1675331639220,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n         $form = $this->createForm(RapportEmpotageType::class, $rapport);\n         $form->handleRequest($request);\n         if ($form->isSubmitted() && $form->isValid()) {\n             $rapport = $form->getData();\n-            $rapport->setUser($this->getUser());\n+            #$rapport->setUser($this->getUser());\n             $manager->persist($rapport);\n             $manager->flush();\n             #return $this->redirectToRoute('site/succes.html.twig');\n         }\n"
                },
                {
                    "date": 1675331683215,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,23 +35,6 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n-    #[Route('/AddRapport', name: 'agent_AddRapport')]\n-    public function add(Request $request, EntityManagerInterface $manager): Response\n-    {\n-       \n-        $rapport = new RapportEmpotage();\n-        $form = $this->createForm(RapportEmpotageType::class, $rapport);\n-        $form->handleRequest($request);\n-        if ($form->isSubmitted() && $form->isValid()) {\n-            $rapport = $form->getData();\n-            #$rapport->setUser($this->getUser());\n-            $manager->persist($rapport);\n-            $manager->flush();\n-            #return $this->redirectToRoute('site/succes.html.twig');\n-        }\n-        return $this->render('agent/rapport.html.twig', [\n-            'form' => $form,\n-        ]);\n-    }\n+  \n }\n"
                },
                {
                    "date": 1675332083287,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,13 +28,30 @@\n         return $this->render('agent/ListeFiche.html.twig',[\n             'fiches'=>$fiches\n         ]);\n     }\n-    #[Route('/{id}', name: 'fiche_show', methods: ['GET'])]\n+    #[Route('/{id}', name: 'fiche_show')]\n     public function show(Fiche $fiche): Response\n     {\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n-  \n+    #[Route('/AddRapport', name: 'agent_AddRapport')]\n+    public function add(Request $request, EntityManagerInterface $manager): Response\n+    {\n+       \n+        $rapport = new RapportEmpotage();\n+        $form = $this->createForm(RapportEmpotageType::class, $rapport);\n+        $form->handleRequest($request);\n+        if ($form->isSubmitted() && $form->isValid()) {\n+            $rapport = $form->getData();\n+            $rapport->setUser($this->getUser());\n+            $manager->persist($rapport);\n+            $manager->flush();\n+            #return $this->redirectToRoute('site/succes.html.twig');\n+        }\n+        return $this->render('agent/rapport.html.twig', [\n+            'form' => $form,\n+        ]);\n+    }\n }\n"
                },
                {
                    "date": 1675332330643,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,23 +35,5 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n-    #[Route('/AddRapport', name: 'agent_AddRapport')]\n-    public function add(Request $request, EntityManagerInterface $manager): Response\n-    {\n-       \n-        $rapport = new RapportEmpotage();\n-        $form = $this->createForm(RapportEmpotageType::class, $rapport);\n-        $form->handleRequest($request);\n-        if ($form->isSubmitted() && $form->isValid()) {\n-            $rapport = $form->getData();\n-            $rapport->setUser($this->getUser());\n-            $manager->persist($rapport);\n-            $manager->flush();\n-            #return $this->redirectToRoute('site/succes.html.twig');\n-        }\n-        return $this->render('agent/rapport.html.twig', [\n-            'form' => $form,\n-        ]);\n-    }\n }\n"
                },
                {
                    "date": 1675332531156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,5 +35,22 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n+    #[Route('/AddRapport', name: 'agent_AddRapport')]\n+    public function add(Request $request, EntityManagerInterface $manager): Response\n+    {\n+        $rapport = new RapportEmpotage();\n+        $form = $this->createForm(RapportEmpotageType::class, $rapport);\n+        $form->handleRequest($request);\n+        if ($form->isSubmitted() && $form->isValid()) {\n+            $rapport = $form->getData();\n+            $rapport->setUser($this->getUser());\n+            $manager->persist($rapport);\n+            $manager->flush();\n+            #return $this->redirectToRoute('site/succes.html.twig');\n+        }\n+        return $this->render('agent/rapport.html.twig', [\n+            'form' => $form,\n+        ]);\n+    }\n }\n"
                },
                {
                    "date": 1675332568948,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,9 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n-    #[Route('/AddRapport', name: 'agent_AddRapport')]\n+    #[Route('/AddRapport', name: 'agent_Rapport')]\n     public function add(Request $request, EntityManagerInterface $manager): Response\n     {\n         $rapport = new RapportEmpotage();\n         $form = $this->createForm(RapportEmpotageType::class, $rapport);\n"
                },
                {
                    "date": 1675332936068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,22 +35,6 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n-    #[Route('/AddRapport', name: 'agent_Rapport')]\n-    public function add(Request $request, EntityManagerInterface $manager): Response\n-    {\n-        $rapport = new RapportEmpotage();\n-        $form = $this->createForm(RapportEmpotageType::class, $rapport);\n-        $form->handleRequest($request);\n-        if ($form->isSubmitted() && $form->isValid()) {\n-            $rapport = $form->getData();\n-            $rapport->setUser($this->getUser());\n-            $manager->persist($rapport);\n-            $manager->flush();\n-            #return $this->redirectToRoute('site/succes.html.twig');\n-        }\n-        return $this->render('agent/rapport.html.twig', [\n-            'form' => $form,\n-        ]);\n-    }\n+  \n }\n"
                },
                {
                    "date": 1675333887733,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,6 +35,23 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n+    #[Route('/AddRapport', name: 'agent_Rapport')]\n+    public function add(Request $request, EntityManagerInterface $manager): Response\n+    {\n+        $rapport = new RapportEmpotage();\n+        $form = $this->createForm(RapportEmpotageType::class, $rapport);\n+        $form->handleRequest($request);\n+        if ($form->isSubmitted() && $form->isValid()) {\n+            $rapport = $form->getData();\n+            $rapport->setUser($this->getUser());\n+            $manager->persist($rapport);\n+            $manager->flush();\n+            #return $this->redirectToRoute('site/succes.html.twig');\n+        }\n+        return $this->render('agent/rapport.html.twig', [\n+            'form' => $form,\n+        ]);\n+    }\n   \n }\n"
                },
                {
                    "date": 1675334153643,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,13 +29,10 @@\n             'fiches'=>$fiches\n         ]);\n     }\n     #[Route('/{id}', name: 'fiche_show')]\n-    public function show(Fiche $fiche): Response\n-    {\n-        return $this->render('agent/fiche/show.html.twig', [\n-            'fiche' => $fiche,\n-        ]);\n+    public function more(): Response{\n+        \n     }\n     #[Route('/AddRapport', name: 'agent_Rapport')]\n     public function add(Request $request, EntityManagerInterface $manager): Response\n     {\n"
                },
                {
                    "date": 1675334169825,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,10 +29,12 @@\n             'fiches'=>$fiches\n         ]);\n     }\n     #[Route('/{id}', name: 'fiche_show')]\n-    public function more(): Response{\n-        \n+    public function more(): Response\n+    {\n+\n+\n     }\n     #[Route('/AddRapport', name: 'agent_Rapport')]\n     public function add(Request $request, EntityManagerInterface $manager): Response\n     {\n"
                },
                {
                    "date": 1675334224508,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,12 +29,12 @@\n             'fiches'=>$fiches\n         ]);\n     }\n     #[Route('/{id}', name: 'fiche_show')]\n-    public function more(): Response\n+    public function more(FicheRepository $fiche): Response\n     {\n \n-\n+        return $this->render(\"\")\n     }\n     #[Route('/AddRapport', name: 'agent_Rapport')]\n     public function add(Request $request, EntityManagerInterface $manager): Response\n     {\n"
                },
                {
                    "date": 1675334253360,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,12 +29,12 @@\n             'fiches'=>$fiches\n         ]);\n     }\n     #[Route('/{id}', name: 'fiche_show')]\n-    public function more(FicheRepository $fiche): Response\n+    public function more(FicheRepository $repository): Response\n     {\n-\n-        return $this->render(\"\")\n+        $fiche = $\n+        return $this->render(\"\");\n     }\n     #[Route('/AddRapport', name: 'agent_Rapport')]\n     public function add(Request $request, EntityManagerInterface $manager): Response\n     {\n"
                },
                {
                    "date": 1675334300512,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n     }\n     #[Route('/{id}', name: 'fiche_show')]\n     public function more(FicheRepository $repository): Response\n     {\n-        $fiche = $\n+        $fiche = $repository->findBy();\n         return $this->render(\"\");\n     }\n     #[Route('/AddRapport', name: 'agent_Rapport')]\n     public function add(Request $request, EntityManagerInterface $manager): Response\n"
                },
                {
                    "date": 1675334512571,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,13 +28,12 @@\n         return $this->render('agent/ListeFiche.html.twig',[\n             'fiches'=>$fiches\n         ]);\n     }\n-    #[Route('/{id}', name: 'fiche_show')]\n-    public function more(FicheRepository $repository): Response\n+    #[Route('/fiche/{id}', name: 'fiche_show')]\n+    public function more(): Response\n     {\n-        $fiche = $repository->findBy();\n-        return $this->render(\"\");\n+        return $this->render(\"agent/show.html.twig\");\n     }\n     #[Route('/AddRapport', name: 'agent_Rapport')]\n     public function add(Request $request, EntityManagerInterface $manager): Response\n     {\n"
                },
                {
                    "date": 1675334711441,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,10 +29,11 @@\n             'fiches'=>$fiches\n         ]);\n     }\n     #[Route('/fiche/{id}', name: 'fiche_show')]\n-    public function more(): Response\n+    public function more(FicheRepository $repository, int $id): Response\n     {\n+        $fiche = $repository->findOneBy(['id' => $id]);\n         return $this->render(\"agent/show.html.twig\");\n     }\n     #[Route('/AddRapport', name: 'agent_Rapport')]\n     public function add(Request $request, EntityManagerInterface $manager): Response\n"
                },
                {
                    "date": 1675334805687,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,11 @@\n     #[Route('/fiche/{id}', name: 'fiche_show')]\n     public function more(FicheRepository $repository, int $id): Response\n     {\n         $fiche = $repository->findOneBy(['id' => $id]);\n-        return $this->render(\"agent/show.html.twig\");\n+        return $this->render(\"agent/show.html.twig\",[\n+            \"fiches\" => $fiche\n+        ]);\n     }\n     #[Route('/AddRapport', name: 'agent_Rapport')]\n     public function add(Request $request, EntityManagerInterface $manager): Response\n     {\n"
                },
                {
                    "date": 1675334884780,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,16 +20,16 @@\n     public function index(): Response\n     {\n         return $this->render('agent/index.html.twig');\n     }\n-    #[Route('/ListeFiche', name: 'agent_ListeFiche')]\n-    public function agent(FicheRepository $repository): Response\n-    {\n-        $fiches = $repository->findAllFicheByUser($this->getUser());\n-        return $this->render('agent/ListeFiche.html.twig',[\n-            'fiches'=>$fiches\n-        ]);\n-    }\n+   # #[Route('/ListeFiche', name: 'agent_ListeFiche')]\n+   # public function agent(FicheRepository $repository): Response\n+   # {\n+      #  $fiches = $repository->findAllFicheByUser($this->getUser());\n+      #  return $this->render('agent/ListeFiche.html.twig',[\n+      #     'fiches'=>$fiches\n+       # ]);\n+    #}\n     #[Route('/fiche/{id}', name: 'fiche_show')]\n     public function more(FicheRepository $repository, int $id): Response\n     {\n         $fiche = $repository->findOneBy(['id' => $id]);\n"
                },
                {
                    "date": 1675334992672,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,24 +20,23 @@\n     public function index(): Response\n     {\n         return $this->render('agent/index.html.twig');\n     }\n-   # #[Route('/ListeFiche', name: 'agent_ListeFiche')]\n-   # public function agent(FicheRepository $repository): Response\n-   # {\n-      #  $fiches = $repository->findAllFicheByUser($this->getUser());\n-      #  return $this->render('agent/ListeFiche.html.twig',[\n-      #     'fiches'=>$fiches\n-       # ]);\n-    #}\n-    #[Route('/fiche/{id}', name: 'fiche_show')]\n-    public function more(FicheRepository $repository, int $id): Response\n+    #[Route('/ListeFiche', name: 'agent_ListeFiche')]\n+    public function agent(FicheRepository $repository): Response\n     {\n-        $fiche = $repository->findOneBy(['id' => $id]);\n-        return $this->render(\"agent/show.html.twig\",[\n-            \"fiches\" => $fiche\n+        $fiches = $repository->findAllFicheByUser($this->getUser());\n+        return $this->render('agent/ListeFiche.html.twig',[\n+            'fiches'=>$fiches\n         ]);\n     }\n+    #[Route('/{id}', name: 'fiche_show')]\n+    public function show(Fiche $fiche): Response\n+    {\n+        return $this->render('agent/fiche/show.html.twig', [\n+            'fiche' => $fiche,\n+        ]);\n+    }\n     #[Route('/AddRapport', name: 'agent_Rapport')]\n     public function add(Request $request, EntityManagerInterface $manager): Response\n     {\n         $rapport = new RapportEmpotage();\n"
                },
                {
                    "date": 1675335290267,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,23 +35,7 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n-    #[Route('/AddRapport', name: 'agent_Rapport')]\n-    public function add(Request $request, EntityManagerInterface $manager): Response\n-    {\n-        $rapport = new RapportEmpotage();\n-        $form = $this->createForm(RapportEmpotageType::class, $rapport);\n-        $form->handleRequest($request);\n-        if ($form->isSubmitted() && $form->isValid()) {\n-            $rapport = $form->getData();\n-            $rapport->setUser($this->getUser());\n-            $manager->persist($rapport);\n-            $manager->flush();\n-            #return $this->redirectToRoute('site/succes.html.twig');\n-        }\n-        return $this->render('agent/rapport.html.twig', [\n-            'form' => $form,\n-        ]);\n-    }\n+   \n   \n }\n"
                },
                {
                    "date": 1675753693822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,7 +35,12 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n+    #[Route('/{id}', name:\"add_rapport\")]\n+    public function add(RapportEmpotage $rapport): Response \n+    {\n+        return $this->render('agent/')\n+    }\n    \n   \n }\n"
                },
                {
                    "date": 1675753939647,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,12 +35,14 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n-    #[Route('/{id}', name:\"add_rapport\")]\n+    #[Route('/rapport/{id}', name:\"add_rapport\")]\n     public function add(RapportEmpotage $rapport): Response \n     {\n-        return $this->render('agent/')\n+        return $this->render('agent/rapport.html.twig', [\n+            'rapport' => $rapport\n+        ]);\n     }\n    \n   \n }\n"
                },
                {
                    "date": 1675754275162,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,9 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n-    #[Route('/rapport/{id}', name:\"add_rapport\")]\n+    #[Route('/{id}/new', name:\"add_rapport\")]\n     public function add(RapportEmpotage $rapport): Response \n     {\n         return $this->render('agent/rapport.html.twig', [\n             'rapport' => $rapport\n"
                },
                {
                    "date": 1675754453311,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n \n use App\\Entity\\RapportEmpotage;\n use App\\Form\\RapportEmpotageType;\n use App\\Repository\\FicheRepository;\n+use App\\Repository\\RapportEmpotageRepository;\n use Doctrine\\ORM\\EntityManagerInterface;\n use Symfony\\Component\\HttpFoundation\\Request;\n use Symfony\\Component\\HttpFoundation\\Response;\n use Symfony\\Component\\Routing\\Annotation\\Route;\n@@ -36,10 +37,24 @@\n             'fiche' => $fiche,\n         ]);\n     }\n     #[Route('/{id}/new', name:\"add_rapport\")]\n-    public function add(RapportEmpotage $rapport): Response \n+    public function add(request $request, RapportEmpotageRepository $rapport): Response \n     {\n+        $rapport = new RapportEmpotage();\n+        $form = $this->createForm(RapportEmpotageType::class, $rapport);\n+        $form->handleRequest($request);\n+\n+        if ($form->isSubmitted() && $form->isValid()) {\n+            $ficheRepository->save($rapport, true);\n+\n+            return $this->redirectToRoute('app_fiche_index', [], Response::HTTP_SEE_OTHER);\n+        }\n+\n+        return $this->renderForm('chef/fiche/new.html.twig', [\n+            'fiche' => $fiche,\n+            'form' => $form,\n+        ]);\n         return $this->render('agent/rapport.html.twig', [\n             'rapport' => $rapport\n         ]);\n     }\n"
                },
                {
                    "date": 1675754719542,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,8 @@\n \n use App\\Entity\\RapportEmpotage;\n use App\\Form\\RapportEmpotageType;\n use App\\Repository\\FicheRepository;\n-use App\\Repository\\RapportEmpotageRepository;\n use Doctrine\\ORM\\EntityManagerInterface;\n use Symfony\\Component\\HttpFoundation\\Request;\n use Symfony\\Component\\HttpFoundation\\Response;\n use Symfony\\Component\\Routing\\Annotation\\Route;\n@@ -36,28 +35,7 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n-    #[Route('/{id}/new', name:\"add_rapport\")]\n-    public function add(request $request, RapportEmpotageRepository $rapport): Response \n-    {\n-        $rapport = new RapportEmpotage();\n-        $form = $this->createForm(RapportEmpotageType::class, $rapport);\n-        $form->handleRequest($request);\n-\n-        if ($form->isSubmitted() && $form->isValid()) {\n-            $ficheRepository->save($rapport, true);\n-\n-            return $this->redirectToRoute('app_fiche_index', [], Response::HTTP_SEE_OTHER);\n-        }\n-\n-        return $this->renderForm('chef/fiche/new.html.twig', [\n-            'fiche' => $fiche,\n-            'form' => $form,\n-        ]);\n-        return $this->render('agent/rapport.html.twig', [\n-            'rapport' => $rapport\n-        ]);\n-    }\n    \n   \n }\n"
                },
                {
                    "date": 1675776806243,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,7 +35,9 @@\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n+    #[Route('/RapportEmpotage/edit/{id}', name:'edit_RapportEmpotage')]\n+    public function edit(Request $request, ): Response\n    \n   \n }\n"
                },
                {
                    "date": 1675776913534,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,8 +36,15 @@\n             'fiche' => $fiche,\n         ]);\n     }\n     #[Route('/RapportEmpotage/edit/{id}', name:'edit_RapportEmpotage')]\n-    public function edit(Request $request, ): Response\n+    public function edit(Request $request, RapportEmpotage $Rapport): Response\n+    {\n+\n+        return $this->render('agent/fiche/edit.html.twig', [\n+            \n+        ]);\n+    }\n+    }\n    \n   \n }\n"
                },
                {
                    "date": 1675776983579,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,13 +36,13 @@\n             'fiche' => $fiche,\n         ]);\n     }\n     #[Route('/RapportEmpotage/edit/{id}', name:'edit_RapportEmpotage')]\n-    public function edit(Request $request, RapportEmpotage $Rapport): Response\n+    public function edit(Request $request, RapportEmpotage $Rapport, EntityManagerInterface $manager): Response\n     {\n \n-        return $this->render('agent/fiche/edit.html.twig', [\n-            \n+        return $this->render('agent/fiche/rapport.html.twig', [\n+            'form' => $Rapport->createView(),\n         ]);\n     }\n     }\n    \n"
                },
                {
                    "date": 1675777239242,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,15 @@\n     }\n     #[Route('/RapportEmpotage/edit/{id}', name:'edit_RapportEmpotage')]\n     public function edit(Request $request, RapportEmpotage $Rapport, EntityManagerInterface $manager): Response\n     {\n-\n+        $form = $this->createForm(RapportEmpotageType::class, $Rapport);\n+        $form->handleRequest($request);\n+        if($form->isSubmitted() && $form->isValid()) {\n+            $rapport = $form->getData();\n+            $manager->persist($rapport);\n+            $manager->flush();\n+        }\n         return $this->render('agent/fiche/rapport.html.twig', [\n             'form' => $Rapport->createView(),\n         ]);\n     }\n"
                },
                {
                    "date": 1675777320840,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,9 +45,9 @@\n             $rapport = $form->getData();\n             $manager->persist($rapport);\n             $manager->flush();\n         }\n-        return $this->render('agent/fiche/rapport.html.twig', [\n+        return $this->render('agent/rapport.html.twig', [\n             'form' => $Rapport->createView(),\n         ]);\n     }\n     }\n"
                },
                {
                    "date": 1675777459973,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,8 +49,8 @@\n         return $this->render('agent/rapport.html.twig', [\n             'form' => $Rapport->createView(),\n         ]);\n     }\n-    }\n+}\n    \n-  \n-}\n+\n+\n"
                },
                {
                    "date": 1675777477559,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,9 +46,9 @@\n             $manager->persist($rapport);\n             $manager->flush();\n         }\n         return $this->render('agent/rapport.html.twig', [\n-            'form' => $Rapport->createView(),\n+            'form' => $form->createView(),\n         ]);\n     }\n }\n    \n"
                },
                {
                    "date": 1677510913767,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,46 +6,89 @@\n \n use App\\Entity\\RapportEmpotage;\n use App\\Form\\RapportEmpotageType;\n use App\\Repository\\FicheRepository;\n+use App\\Repository\\RapportEmpotageRepository;\n use Doctrine\\ORM\\EntityManagerInterface;\n use Symfony\\Component\\HttpFoundation\\Request;\n use Symfony\\Component\\HttpFoundation\\Response;\n use Symfony\\Component\\Routing\\Annotation\\Route;\n use Symfony\\Bundle\\FrameworkBundle\\Controller\\AbstractController;\n+use Sensio\\Bundle\\FrameworkExtraBundle\\Configuration\\IsGranted;\n+use Sensio\\Bundle\\FrameworkExtraBundle\\Configuration\\Security;\n \n #[Route('/agent')]\n class AgentController extends AbstractController\n {\n+    #[isGranted('ROLE_AGENT')]\n+    #[Security(\"is_granted('ROLE_AGENT')\")]\n     #[Route('/', name: 'agentIndex')]\n-    public function index(): Response\n+    public function index(FicheRepository $ficheRepository): Response\n     {\n-        return $this->render('agent/index.html.twig');\n+        if(!$this->getUser()){\n+            return $this->redirectToRoute('app_login');\n+        }\n+        $nombreTraite = count($ficheRepository->findAllFicheEffectueByUser($this->getUser()));\n+        $nombreNonTraite = count($ficheRepository->findAllFicheByUser($this->getUser()));\n+        return $this->render('agent/index.html.twig',[\n+            \"nombreFicheTraite\"=>$nombreTraite,\n+            \"nombreFicheNonTraite\"=>$nombreNonTraite,\n+        ]);\n     }\n+    #[Security(\"is_granted('ROLE_AGENT')\")]\n+    #[isGranted('ROLE_AGENT')]\n     #[Route('/ListeFiche', name: 'agent_ListeFiche')]\n     public function agent(FicheRepository $repository): Response\n     {\n+        if(!$this->getUser()){\n+            return $this->redirectToRoute('app_login');\n+        }\n         $fiches = $repository->findAllFicheByUser($this->getUser());\n         return $this->render('agent/ListeFiche.html.twig',[\n             'fiches'=>$fiches\n         ]);\n     }\n+    #[isGranted('ROLE_AGENT')]\n+    #[Security(\"is_granted('ROLE_AGENT')\")]\n+    #[Route('/ListeFicheEffectue', name: 'agent_ListeFicheEffectue')]\n+    public function effectue(FicheRepository $repository): Response\n+    {\n+        if(!$this->getUser()){\n+            return $this->redirectToRoute('app_login');\n+        }\n+        $fiches = $repository->findAllFicheEffectueByUser($this->getUser()); \n+        return $this->render('agent/ListeFicheEffectue.html.twig',[\n+            'fiches'=>$fiches\n+        ]);\n+    }\n+    #[isGranted('ROLE_AGENT')]\n+    #[Security(\"is_granted('ROLE_AGENT')\")]\n     #[Route('/{id}', name: 'fiche_show')]\n     public function show(Fiche $fiche): Response\n     {\n         return $this->render('agent/fiche/show.html.twig', [\n             'fiche' => $fiche,\n         ]);\n     }\n+    #[isGranted('ROLE_AGENT')]\n+    #[Security(\"is_granted('ROLE_AGENT')\")]\n     #[Route('/RapportEmpotage/edit/{id}', name:'edit_RapportEmpotage')]\n-    public function edit(Request $request, RapportEmpotage $Rapport, EntityManagerInterface $manager): Response\n+    public function edit(Request $request, RapportEmpotage $Rapport, EntityManagerInterface $manager, FicheRepository $repository): Response\n     {\n+        if(!$this->getUser()){\n+            return $this->redirectToRoute('app_login');\n+        }\n+        $fiche = $repository->findFiche($request->attributes->get('id'));\n         $form = $this->createForm(RapportEmpotageType::class, $Rapport);\n         $form->handleRequest($request);\n         if($form->isSubmitted() && $form->isValid()) {\n             $rapport = $form->getData();\n+            $fiche->setStatut(true);\n+            $rapport->setDate(new \\DateTimeImmutable);\n             $manager->persist($rapport);\n             $manager->flush();\n+            $this->addFlash('success', 'Rapport redigé avec succès!');\n+            return $this->redirectToRoute('agent_ListeFicheEffectue');\n         }\n         return $this->render('agent/rapport.html.twig', [\n             'form' => $form->createView(),\n         ]);\n"
                }
            ],
            "date": 1674485029466,
            "name": "Commit-0",
            "content": "<?php\r\n\r\nnamespace App\\Controller;\r\n\r\nuse Symfony\\Bundle\\FrameworkBundle\\Controller\\AbstractController;\r\nuse Symfony\\Component\\HttpFoundation\\Response;\r\nuse Symfony\\Component\\Routing\\Annotation\\Route;\r\n\r\nclass AgentController extends AbstractController\r\n{\r\n\r\n    #[Route('/agent', name: 'chef.index')]\r\n    public function chef(): Response\r\n    {\r\n        return $this->render('agent/test.html.twig');\r\n    }\r\n}\r\n"
        }
    ]
}